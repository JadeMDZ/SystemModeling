import numpy as np

# Параметры
N = 10000
x = np.array([-2, 1, 3, 4])
p = np.array([0.1, 0.7, 0.1, 0.1])
k = np.array([0, 0, 0, 0])
pcum = np.cumsum(p)

# Генерация случайных чисел и подбор ключей
for i in range(N):
    r = np.random.uniform(0, 1)
    if r < pcum[0]: k[0] += 1
    elif r < pcum[1]: k[1] += 1
    elif r < pcum[2]: k[2] += 1
    else: k[3] += 1
#Вычисления
Mx = np.sum(x*p)
Dx = np.sum(x**2 * p) - Mx**2
m = np.sum(k * x) / N
Mxn = abs(Mx-m)
g = np.sum(k*x**2)/N-m**2
Dxq=abs(Dx-g)
#Вывод
print("┌───────┬───────┐")
print("│   x   │   p   │")
print("├───────┼───────┤")
for i in range(len(x)):
    print(f"│ {x[i]:^5} │ {p[i]:^5} │")  
print("└───────┴───────┘")
print('')
print("┌──────────────────┬──────────────────┬──────────────────┬──────────────────┐")
print("│        k1        │        k2        │        k3        │        k4        │")
print("├──────────────────┼──────────────────┼──────────────────┼──────────────────┤")
print(f"│ {k[0]:^16.3f} │ {k[1]:^16.3f} │ {k[2]:^16.3f} │ {k[3]:^16.3f} │")
print("└──────────────────┴──────────────────┴──────────────────┴──────────────────┘")
print('')
print("┌───────┬──────────────────┬──────────────────┬──────────────────┬──────────────────┬──────────────────┬──────────────────┐")
print("│   N   │        Mx        │        m         │      |Mx-m|      │        Dx        │         g        │      |Dx-g|      │")
print("├───────┼──────────────────┼──────────────────┼──────────────────┼──────────────────┼──────────────────┼──────────────────┤")
print(f"│ {N:^5} │ {Mx:^16.3f} │ {m:^16.3f} │ {Mxn:^16.3f} │ {Dx:^16.3f} │ {g:^16.3f} │ {Dxq:^16.3f} │")
print("└───────┴──────────────────┴──────────────────┴──────────────────┴──────────────────┴──────────────────┴──────────────────┘")